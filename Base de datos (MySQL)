CREATE DATABASE LIBRERIA;
USE LIBRERIA;

CREATE TABLE usuario(
id_usuario int not null auto_increment,
nombre_completo varchar(250),
nombre_usuario varchar(250),
contraseña varchar(24),
cargo varchar(20),
primary key (id_usuario)
);

CREATE TABLE autor(
cod_autor int not null auto_increment,
nombre_autor varchar(50),
primary key (cod_autor)
);

CREATE TABLE editorial(
cod_editorial int not null auto_increment,
nombre_editorial varchar(50),
primary key (cod_editorial)
);

CREATE TABLE producto(
cod_producto int not null auto_increment,
nombre_producto varchar(50),
descripcion varchar(500),
tipo_producto varchar(250),
cod_editorial int,
cod_autor int,
primary key (cod_producto),
foreign key (cod_editorial) references editorial(cod_editorial),
foreign key (cod_autor) references autor (cod_autor)
);

CREATE TABLE bodega(
cod_bodega int not null auto_increment,
nombre_bodega varchar(50),
primary key (cod_bodega)
);

CREATE TABLE producto_bodega(
cod_producto_bodega int not null auto_increment,
cod_bodega int not null,
cod_producto int not null,
cantidad int,
primary key (cod_producto_bodega),
foreign key (cod_bodega)references bodega(cod_bodega),
foreign key (cod_producto) references producto(cod_producto)
);

CREATE TABLE autor_producto(
cod_autor_producto int not null auto_increment,
cod_autor int not null,
cod_producto int not null,
primary key (cod_autor_producto),
foreign key (cod_autor) references autor(cod_autor),
foreign key (cod_producto) references producto(cod_producto)
);

CREATE TABLE movimiento(
id_movimiento int not null auto_increment,
fecha_movimiento date,
cod_producto int not null,
bodega_origen int,
bodega_destino int,
cantidad int,
tipo_movimiento varchar(50),
primary key (id_movimiento)
);

-- Llenar la tabla "usuario"
INSERT INTO usuario (nombre, contraseña, cargo) VALUES('Matias Sepulveda', '123456', 'Jefe de Bodega'),('Bryan Barela', '12345', 'Bodeguero'),('Fabian Rivera', '1234', 'Bodeguero');

select * from usuario;

-- Llenar la tabla "autor"
INSERT INTO autor (nombre) VALUES
  ('James Dashner'),
  ('J.K Rowling');

select * from autor;

-- Llenar la tabla "editorial"
INSERT INTO editorial (nombre_editorial) VALUES('Salamandra'),('Vyar');

select * from editorial;

-- Llenar la tabla "tipo_producto"
INSERT INTO tipo_producto (nombre_tipo) VALUES('Libro'),('Revista'),('Enciclopedia');

select * from tipo_producto;

-- Llenar la tabla "producto"
INSERT INTO producto (nombre, cod_tipo_producto, cod_editorial, cod_autor) VALUES('Harry Potter y la piedra filosofal', 1, 2,2),('Harry Potter y la cámara secreta', 1, 2,2),('Harry Potter y el prisionero de Azkaban', 1, 2,2);
  
select * from producto;

-- Llenar la tabla "bodega"
INSERT INTO bodega (nombre_bodega) VALUES
  ('Bodega Principal'),
  ('Bodega Almacén'),
  ('Bodega Secundaria');

select * from bodega;

-- Llenar la tabla "producto_bodega"
INSERT INTO producto_bodega (cod_bodega, cod_producto, stock) VALUES
  (1, 1, 50),
  (2, 2, 30),
  (3, 3, 20);
  
select * from producto_bodega;

-- Llenar la tabla "autor_producto"
INSERT INTO autor_producto (cod_autor, cod_producto) VALUES
  (1, 1),
  (1, 2),
  (1, 3);
  
select * from autor_producto;
